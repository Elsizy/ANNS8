<!DOCTYPE html>
<html lang="pt-BR">
<meta charset="utf-8" />
<title>Configurar Admin (novo projeto)</title>
<body style="font-family:system-ui;padding:24px;max-width:600px;margin:auto;">
  <h2>Configurar Admin</h2>
  <p>Cria um usuário no Auth e marca como admin no RTDB (<code>/admin/&lt;uid&gt; = true</code>).</p>
  <div style="display:flex; gap:8px; margin:12px 0;">
    <input id="email" type="email" placeholder="E-mail do admin" style="flex:1; padding:8px;">
    <input id="password" type="password" placeholder="Senha" style="flex:1; padding:8px;">
    <button id="go">Criar admin</button>
  </div>
  <pre id="out" style="background:#111;color:#eee;padding:12px;border-radius:8px;white-space:pre-wrap;"></pre>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
    import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

    // ⬇️ COLE AQUI O MESMO CONFIG DO NOVO PROJETO
    const firebaseConfig = {
      apiKey: "AIzaSyDnd53WofoxaKUfTtQiyA6B3KkCYicUFVE",
  authDomain: "aesinc-1b8a9.firebaseapp.com",
  databaseURL: "https://aesinc-1b8a9-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "aesinc-1b8a9",
  storageBucket: "aesinc-1b8a9.firebasestorage.app",
  messagingSenderId: "241657630880",
  appId: "1:241657630880:web:3342e177b87480427fb9c5"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);

    const $ = id => document.getElementById(id);
    const log = m => $("out").textContent += m + "\n";

    $("go").onclick = async () => {
      const email = $("email").value.trim();
      const password = $("password").value;
      if (!email || !password) return alert("Preencha e-mail e senha.");

      try {
        const cred = await createUserWithEmailAndPassword(auth, email, password);
        log("✅ Usuário criado: " + cred.user.uid);
        await set(ref(db, `admin/${cred.user.uid}`), true);
        log("✅ Marcado como admin em /admin/" + cred.user.uid);
        alert("Admin criado e marcado!");
      } catch (e) {
        console.error(e); log("❌ Erro: " + e.message); alert(e.message);
      }
    };
  </script>
</body>
</html>
